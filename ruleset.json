[
  {
    "name": "Protect main branch",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["main"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 1
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["user:nmxmxh"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "user:nmxmxh",
        "actor_type": "User"
      }
    ]
  },
  {
    "name": "Protect proto directory",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["proto/*", "api/protos/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["user:nmxmxh"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "user:nmxmxh",
        "actor_type": "User"
      }
    ]
  },
  {
    "name": "Protect metadata documentation",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["docs/services/metadata*", "docs/services/metadata.md"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 1
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["user:nmxmxh"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "user:nmxmxh",
        "actor_type": "User"
      }
    ]
  },
  {
    "name": "Protect pkg directory",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["pkg/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:core-devs"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:core-devs",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect graceful package",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["pkg/graceful/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:core-devs"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:core-devs",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect nexus pattern",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["internal/nexus/service/pattern/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:core-devs"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:core-devs",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect nexus bridge",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["internal/nexus/service/bridge/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:core-devs"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:core-devs",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect tax directory",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["tax/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 2
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["user:nmxmxh"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "user:nmxmxh",
        "actor_type": "User"
      }
    ]
  },
  {
    "name": "Protect docs/amadeus directory",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["docs/amadeus/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 1
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:core-devs", "team:docs-maintainers"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:core-devs",
        "actor_type": "Team"
      },
      {
        "actor_id": "team:docs-maintainers",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect service specific branches",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["service/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 1
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:service-owners"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:service-owners",
        "actor_type": "Team"
      }
    ]
  },
  {
    "name": "Protect staging branches",
    "target": "branch",
    "enforcement": "active",
    "conditions": {
      "ref_name": {
        "include": ["staging/*"]
      }
    },
    "rules": [
      {
        "type": "required_pull_request_reviews",
        "parameters": {
          "required_approving_review_count": 1
        }
      },
      {
        "type": "restrict_pushes",
        "parameters": {
          "actor_ids": ["team:maintainers"]
        }
      }
    ],
    "bypass_actors": [
      {
        "actor_id": "team:maintainers",
        "actor_type": "Team"
      }
    ]
  }
]
